<ion-header>
  <ion-toolbar>
    <ion-title>Gérer les ingrédients</ion-title>
  </ion-toolbar>
  <ion-segment [(ngModel)]="selectedView">
      <ion-segment-button value="items-list">
        <ion-label>Liste</ion-label>
      </ion-segment-button>
      <ion-segment-button value="add-item">
        <ion-label>Ajouter</ion-label>
      </ion-segment-button>
  </ion-segment>
</ion-header>

<ion-content>

    <div [ngSwitch]="selectedView">
        <div *ngSwitchCase="'items-list'" class="items-list">
          <ion-item lines="none" *ngFor="let ingredient of ingredients" class="ingredientList" (click) = "goToItemPage(ingredient.id)">
              <div class="itemBloc">
                  <div class="itemInfo">
                    <p class="itemName">{{ingredient.nom}} ({{ingredient.unite}})</p>
                    <p class="itemNb">Utilisé dans {{ingredient.nbRecettes}} recette(s)</p>
                  </div>
              </div>
          </ion-item>
        </div>

        <div *ngSwitchCase="'add-item'">
            <form [formGroup]="itemForm" (ngSubmit)="addIngredient()">
              <ion-item>
                <ion-input  formControlName="nom" placeholder="Nom de l'ingrédient" autocapitalize="sentences"></ion-input>
              </ion-item>
              <ion-item>
                <ion-select  formControlName="um" placeholder="Unité de l'ingrédient">
                  <ion-select-option *ngFor="let um of ums" [value]="um.id">{{ um.nom }}</ion-select-option>
                </ion-select>
              </ion-item>
              <ion-item class="addBloc" lines="none">
                  <ion-button class="btnSave" expand="block" type="submit" [disabled]="!itemForm.valid">Ajouter l'ingrédient</ion-button>
              </ion-item>
            </form>
          </div>
        </div>

</ion-content>

<ion-footer>
  <ion-toolbar>
      <ion-item class="footerLeft" routerLink="" lines="none">
        <ion-icon name="home"></ion-icon>
      </ion-item>

      <ion-item class="footerRight" routerLink="/search-part" lines="none">
          <ion-icon name="search"></ion-icon>
      </ion-item>
  </ion-toolbar>
</ion-footer>
